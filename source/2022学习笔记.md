# 2022学习笔记


---

* [携程最终一致和强一致性缓存实践](#携程最终一致和强一致性缓存实践)
   * [最终一致性分布式缓存场景](#最终一致性分布式缓存场景)
      * [场景描述](#场景描述)
      * [整体方案](#整体方案)
      * [数据准确性设计](#数据准确性设计)
      * [数据完整性设计](#数据完整性设计)
      * [系统可用性保证](#系统可用性保证)
* [IM系统](#im系统)
* [图像识别](#图像识别)


# 携程最终一致和强一致性缓存实践

- https://mp.weixin.qq.com/s/E-chAZyHtaZOdA19mW59-Q

文章主要分为两个方面（最终一致性分布式缓存场景、强一致性分布式缓存场景）来讲解携程是如何使用缓存（redis）来降低mysql等db层面的查询压力的。

## 最终一致性分布式缓存场景

### 场景描述

经过几年演进，携程金融形成了自顶向下的多层次系统架构，如业务层、平台层、基础服务层等，其中用户信息、产品信息、订单信息等基础数据由基础平台等底层系统产生，服务于所有的金融系统，对这部分基础数据我们引入了统一的缓存服务（系统名utag），缓存数据有三大特点：**全量、准实时、永久有效**，在数据实时性要求不高的场景下，业务系统可直接调用统一的缓存查询接口。

我们的典型使用场景有：风控流程、APP入口信息提示等，而对数据一致性要求高的场景依然需要走实时的业务接口查询。引入缓存前后系统架构对比如下：

![1](1.png)

由于引入了缓存，势必会带来以下一些好处：查询的效率显著提高，查询接口层面可以做到统一，缓解底层基础服务的查询压力。

但是，也因为引入了缓存会增加系统的整体复杂度以及数据一致性问题。接下来主要从如下三个方面来讨论。

- 数据准确性：DB中单条数据的更新一定要准确同步到缓存服务。
- 数据完整性：将对应DB表的全量数据进行缓存且永久有效，从而可以替代对应的DB查询。
- 系统可用性：我们多个产品线的多个核心服务都已经接入，utag的高可用性显的尤为关键。

接下来先说明统一缓存服务的整体方案，再逐一介绍此三个关键特性的设计实现方案。

### 整体方案

简单来说就是，缓存集群服务多地部署，并且缓存更新的触发源存在多个，实现互补。缓存的更新通过mq通知到各集群。如下图所示：

![2](2.png)

### 数据准确性设计

### 数据完整性设计

### 系统可用性保证



# IM系统
- https://xie.infoq.cn/article/19e95a78e2f5389588debfb1c
- http://www.52im.net/thread-2848-1-1.html
- https://mp.weixin.qq.com/s/fMF_FjcdLiXc_JVmf4fl0w


# 图像识别




